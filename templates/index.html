<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Billing App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, #00c6ff, #0072ff);
            color: white;
            padding: 20px;
        }
        input, button {
            padding: 10px;
            margin: 5px;
            border: none;
            border-radius: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

    <h1>Billing App</h1>
    <form id="billing-form">
        <input type="text" id="model" placeholder="Mobile Model" required>
        <input type="number" id="quantity" placeholder="Quantity" required>
        <button type="submit">Add Item</button>
        <button type="button" id="clear-button">Clear All Items</button>
        <a href="/export" id="export-button"><button type="button">Export to XLSX</button></a>
    </form>

    <table id="billing-table">
        <thead>
            <tr>
                <th>SL No</th>
                <th>Mobile Model</th>
                <th>Quantity</th>
            </tr>
        </thead>
        <tbody id="billing-list">
            <!-- Added items will be dynamically inserted here -->
        </tbody>
    </table>

    <script>
        const form = document.getElementById('billing-form');
        const billingList = document.getElementById('billing-list');
        const clearButton = document.getElementById('clear-button');
        let slNo = 1;

        form.addEventListener('submit', function(e) {
            e.preventDefault();

            const model = document.getElementById('model').value;
            const quantity = document.getElementById('quantity').value;

            // Create a new row for the table
            const row = document.createElement('tr');
            row.innerHTML = `<td>${slNo++}</td><td>${model}</td><td>${quantity} pieces</td>`;
            billingList.appendChild(row);

            // Clear input fields
            document.getElementById('model').value = '';
            document.getElementById('quantity').value = '';
            
            // Send the data to the backend
            fetch('/add_item', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                },
                body: new URLSearchParams({ model, quantity })
            });
        });

        clearButton.addEventListener('click', function() {
            billingList.innerHTML = ''; // Clear all items
            slNo = 1; // Reset serial number
            // Clear the billing items from the backend
            fetch('/clear_items', { method: 'POST' });
        });
    </script>

</body>
</html>
